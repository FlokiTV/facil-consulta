# Facil Consulta

```
Teste tÃ©cnico para desenvolvedor Back-end Pleno.
Projeto criado com Docker, Laravel Sail 10 e banco de dados MySQL.
Hospedado na AWS EC2 tier gratuito.
```
Link para o teste:
[PDF](https://drive.google.com/drive/folders/1xgEfsnMSpv-jhE7fPIDr3X7_DllcJrY0)

URL de testes: http://44.217.200.121:8080/api/

phpMyAdmin: http://44.217.200.121:8081

## API
```
legenda das rotas:
ğŸ”“ pÃºblica
ğŸ”’ privada - Authorization: Bearer eyJhbGciOiJIUzI1NiI...
```
### AutenticaÃ§Ã£o
<details>
<summary>Listar usuÃ¡rio autenticado</summary>

```js
ğŸ”’ GET  /user
```
</details>

<details>
<summary>AutenticaÃ§Ã£o</summary>

```js
ğŸ”’ POST /login
{
    email: "christian.ramires@example.com",
    password: "password"
}
```
</details>

### Cidades
<details>
<summary>Listar cidades</summary>

```js
ğŸ”“ GET  /cidades
```
</details>

### MÃ©dicos
<details>
<summary>Listar mÃ©dicos</summary>

```js
ğŸ”“ GET  /medicos
```
</details>

<details>
<summary>Listar mÃ©dicos de uma cidade</summary>

```js
ğŸ”“ GET  /cidades/{{id_cidade}}/medicos
```
</details>

<details>
<summary>Adicionar novo mÃ©dico</summary>

```js
ğŸ”’ POST /medicos 
{
    nome: "Dra. Alessandra Moura",
    especialidade: "Neurologista",
    cidade_id: {{id_cidade}}
}
```
</details>

<details>
<summary>Vincular paciente ao mÃ©dico</summary>

```js
ğŸ”’ POST /medicos/{{id_medico}}/pacientes
{
    medico_id: {{id_medico}},
    paciente_id: {{id_paciente}}
}
```
</details>

### Pacientes

<details>
<summary>Listar pacientes do mÃ©dico</summary>

```js
ğŸ”’ GET  /medicos/{{id_medico}}/pacientes
```
</details>

<details>
<summary>Adicionar novo paciente</summary>

```js
ğŸ”’ POST /pacientes
{
    nome: "Matheus Henrique",
    cpf: "795.429.941-60",
    celular: "(11) 9 8432-5789"
}
```
</details>

<details>
<summary>Atualizar paciente</summary>

```js
ğŸ”’ PUT  /pacientes/{{id_paciente}}
ğŸ”’ POST /pacientes/{{id_paciente}}
{
    nome: "Luana Rodrigues Garcia",
    celular: "(11) 98484-6362"
}
```
</details>

## Rotina de testes
Os testes foram desenvolvidos com o node test runner
#### Teste de privacidade de rotas
```
sail node tests/rotas.js
```
#### Teste autenticaÃ§Ã£o
```
sail node tests/auth.js
```
#### Teste de mÃ©dicos
```
sail node tests/medicos.js
```
#### Teste de pacientes
```
sail node tests/pacientes.js
```
### ReferÃªncias

https://laravel.com/docs/10.x/sail

https://jwt-auth.readthedocs.io/en/develop/auth-guard/

<details>
<summary>ObservaÃ§Ãµes sobre o teste tÃ©cnico</summary>

Existem pequenas divergÃªncias entre o PDF e as coleÃ§Ãµes do Postman
 - Na coleÃ§Ã£o existe o `POST /medicos - Adicionar um novo mÃ©dico`, que nÃ£o Ã© exigido no teste escrito
 - No PDF, 3.3.2. Atualizar paciente, exige o mÃ©todo `POST` e na coleÃ§Ã£o Ã© utilizado o `PUT`
 - Ao vincular o paciente com o mÃ©dico, existe a redundÃ¢ncia do `id_medico` como parÃ¢metro da url e no corpo da requisiÃ§Ã£o

</details>
